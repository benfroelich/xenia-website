{% extends "base.html" %}
{% block title %}{{ post.title }}{% endblock %}
{% block content %}
  {% if post %}
  <h1>{{ post.title }}</h1>
  <p>published {{ post.pub_date }}</p>
  {% if post.pub_date != post.edit_date %}
  <p>updated {{ post.edit_date }}</p>
  {% endif %}
  <p>{{ post.text }}</p>
  {% else %}
    <p>No post dag yo</p>
  {% endif %}
  <h2>Comments</h2>
  <div>
    {% include 'blog/comment_response.html' with post_id=post.pk thread_id="new" form_class="comment-form-visible" %} </div>
  {% for t in post.thread_set.all %}
  {% if t.comment_set.count > 0 %}
    <div>
      {% for c in t.comment_set.all %}
      <p>
        {% if c.author %} {{ c.author }} 
        {% else %} anonymous {% endif %} 
        wrote on {{ c.pub_date }} 
        {% if c.edit_date != c.edit_date %} 
        edited on {{ c.edit_date }} {% endif %}
      </p>
      <p>{{ c.comment_text }}</p>
      {% endfor %}
      {% include 'blog/comment_response.html' with post_id=post.pk thread_id=t.pk form_class="comment-form-hidden" %}
    </div>
  {% endif %}
  {% endfor %}
<!-- <script>
  // TODO move
  let comments = ['one', 'two', 'three']
  let myblock = document.getElementById('test')
  for (const comment of comments) {
      const element = document.createElement('p');
      element.textContent = comment;
      myblock.appendChild(element);
    }
</script>

-->
{% endblock content %}
